<div class="media panel panel-default">
  <div class="panel-body">
    <div class="media-left">

      {# user profile picture #}
      <a href="{{ url('fos_user_profile_show', {'user': post.user}) }}">
        <img class="media-object" width="64" height="64" src="{{ post.user.profileimageurl }}" alt="{{ post.user }}'s profile image" />
      </a>
    </div>
    <div class="media-body">

      {# pass body through markdown filter #}
      {{ post.body|markdown }}

      {# post meta #}
      <p>
        <small>Posted by <a href="{{ url('bkstg_user_view_user', {'user': post.user.id}) }}">{{ post.user }}</a> on {{ post.created|date("F jS \\a\\t g:ia") }}</small>
      </p>

      {# post actions #}
      {% if is_granted("edit", post) %}
        <div class="button-group well">
          <a class="btn btn-default" href="{{ path('bkstg_board_edit_post', { 'post': post }) }}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> edit</a>
          <a class="btn btn-danger" href="{{ path('bkstg_board_delete_post', { 'post': post }) }}"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> delete</a>
        </div>
      {% endif %}

      {# child posts recursive call #}
      {% for child in post.children %}
        {% include 'BkstgNoticeBoardBundle:Post:post.html.twig' with { 'post': child } only %}
      {% endfor %}

      {# reply form if applicable #}
      {% if post.form is defined %}
        {% include 'BkstgCoreBundle:Partials:form.html.twig' with { 'form': post.form } only %}
      {% endif %}
    </div>
  </div>
</div>
